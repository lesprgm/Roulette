name = "roulette-api"
main = "src/index.ts"
compatibility_date = "2025-10-18"

[[kv_namespaces]]
binding = "ASSETS_KV"
id = "ff676cffb12944739d1c4cb46a86fbf8"

[[kv_namespaces]]
binding = "DEDUPE_KV"
id = "d93426b6ced34647888c0b5efc15b84c"

[[kv_namespaces]]
binding = "LIMITER_KV"
id = "7533aac38c7a4eef96e9dba4519c400c"

[[durable_objects.bindings]]
name = "QUEUE_DO"
class_name = "PrefetchQueue"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["PrefetchQueue"]

[vars]
GROQ_MODEL = "openai/gpt-oss-120b"
GROQ_FALLBACK_MODEL = "qwen/qwen3-32b"
OPENROUTER_MODEL = "devstral-2512:free"
OPENROUTER_FALLBACK_MODEL_1 = "google/gemini-2.0-flash-exp:free"
OPENROUTER_FALLBACK_MODEL_2 = "deepseek/deepseek-chat-v3.1:free"
GEMINI_GENERATION_MODEL = "gemini-3-flash-preview"
GEMINI_REVIEW_MODEL = "gemini-2.5-flash"
GEMINI_REVIEW_ENABLED = true

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

# Serve static assets from these directories
[assets]
directory = "./static"

[triggers]
crons = ["*/7 * * * *"]
